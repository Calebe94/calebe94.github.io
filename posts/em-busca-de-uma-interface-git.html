<!DOCTYPE html>
<html lang="en">
<head>
<link rel="stylesheet" href="/static/css/retro.css">
<link rel="stylesheet" href="/static/css/carousel.css">
<link rel="stylesheet" href="/static/css/fontello.css">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">

<!-- HTML Meta Tags -->
<title>Em busca de uma
interface git self-hosted &mdash; Em busca de uma interface git self-hosted - Calebe94</title>
<meta name="description" content="Esta √© a p√°gina pessoal e blog de Calebe94.">

<!-- Google / Search Engine Tags -->
<meta itemprop="name" content="calebe.dev.br">
<meta itemprop="description" content="Esta √© a p√°gina pessoal e blog de Calebe94.">
<meta itemprop="image" content="https://media.calebe.dev.br/images/calebe94_1200.png">

<!-- Facebook Meta Tags -->
<meta property="og:url" content="https://calebe.dev.br/site">
<meta property="og:type" content="website">
<meta property="og:title" content="calebe.dev.br">
<meta property="og:description" content="Esta √© a p√°gina pessoal e blog de Calebe94.">
<meta property="og:image" content="https://media.calebe.dev.br/images/calebe94.png">

<!-- Twitter Meta Tags -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="calebe.dev.br">
<meta name="twitter:description" content="Esta √© a p√°gina pessoal e blog de Calebe94.">
<meta name="twitter:image" content="https://media.calebe.dev.br/images/calebe94.png">

<!-- Meta Tags Generated via http://heymeta.com -->

<meta name="twitter:card" content="summary_large_image">

<!-- Meta Content Security Policy -->
<!-- <meta http-equiv="Content-Security-Policy"
     content="default-src 'self';
     script-src 'self' 'report-sample';
     style-src 'self' 'report-sample';
     base-uri 'self';
     object-src 'none';
     connect-src 'self';
     font-src 'self';
     frame-src 'self';
     form-action 'self';
     img-src 'self' data: https:;
     manifest-src 'self';
     media-src 'self';
     worker-src 'none';
     "> -->

<link rel="icon" type="image/x-icon" href="https://blog.calebe.dev.br/static/favicon.ico">
<style type="text/css" media="screen">
@import ‚Äú/static/css/fontello‚Äù;
</style>

<title>Em busca de uma
interface git self-hosted &mdash; Em busca de uma interface git self-hosted - Calebe94</title>
</head>
<body>
    <button onclick="topFunction()" id="top-button" title="Go to top">Top</button>
    <header class="site-header">

        <nav class="nav-top">
            <h3>
                <div class="whoami-animation">$ whoami</div>
                <a class="result-animation" href="/">&#8203</a>
            </h3>
            <h5><a href="/posts"a>‚úâÔ∏è Posts </a></h5>
            <h5><a href="/uses.html">‚öíÔ∏è Uses </a></h5>
            <h5><a href="/recommends/">üîñ   Favoritos </a></h5>
            <!-- <h5><a href="/curriculum.html">üìã    Curr√≠culo </a></h5> -->
            <h5><a href="//links.calebe.dev.br">üîó Links </a></h5>
            <h5><a href="//git.calebe.dev.br">üöß Projetos </a></h5>
        </nav>
    </header>
    <main>
    <hr>
<nav class="site-header"><h5>$ pwd<br>/<a href="/">home</a>/<a href="/posts">posts</a>/<a href="/posts/em-busca-de-uma-interface-git.html">Em busca de uma interface git self-hosted</a></h5></nav>
<!--
title: "Em busca de uma interface git self-hosted"
subtitle: ""
date: "2022-02-28 00:02:23"
tags: []

-->
<h1 id="em-busca-de-uma-interface-git-self-hosted">Em busca de uma
interface git self-hosted</h1>
<p>Estive em busca de uma interface <code>git</code> para hospedar os
meus projetos em meu pr√≥prio servidor, para de certa forma servir de meu
portif√≥lio.</p>
<p>Eu j√° tinha conhecimento de que o <a
href="https://gitlab.com/">gitlab</a> permite que os usu√°rios criem a
sua pr√≥pria inst√¢ncia(self-host) em seus servidores, e eu mesmo j√°
hospedei uma inst√¢ncia do <a href="https://gitlab.com/">gitlab</a> em
minha VPS.</p>
<p>Por√©m, achei a plataforma muito pesada, necessitando de muita mem√≥ria
RAM, e o ‚Äúfresh install‚Äù do <a href="https://gitlab.com/">gitlab</a> j√°
consumia <strong>8¬†GB</strong> de armazenamento.</p>
<p>Ent√£o iniciei a minha pesquisa a procura de uma interface
<code>git</code> que fosse, simples e leve.</p>
<h2 id="in√≠cio-das-pesquisas">In√≠cio das pesquisas</h2>
<p>Primeiro me lembrei que o projeto <a
href="https://suckless.org/">suckless</a> faz a hospedagem de seus
pr√≥prios reposit√≥rios utilizando uma interface <code>git</code> bem
simples.</p>
<p>Pesquisando um pouco descobri que se trata do [stagit], uma
ferramenta que gera p√°ginas est√°ticas para os seus reposit√≥rios
<code>git</code>.</p>
<p>Gostei da proposta do [stagit], por√©m, esta ferramenta precisa ser
rodada peri√≥dicamente para gerar as p√°ginas dos reposit√≥rios(ou a cada
altera√ß√£o).</p>
<p>Pesquisando mais um pouco, eu encontrei um post no blog <a
href="https://www.paritybit.ca/blog/choosing-a-self-hosted-git-service">paritybit</a>
citando algumas plataformas que ele encontrou em sua jornada em busca de
um servidor git.</p>
<p><a
href="https://www.paritybit.ca/blog/choosing-a-self-hosted-git-service">Neste
post</a> o autor cita v√°rios servidores, mas um deles me chamou a
aten√ß√£o por ser escrito utilizando a linguagem <code>C</code>.</p>
<p>Este software se chama <a
href="https://git.zx2c4.com/cgit/">cgit</a>. O que me chamou a aten√ß√£o a
respeito do <a href="https://git.zx2c4.com/cgit/">cgit</a> √© o fato de
ele poder ser rodado via <a
href="https://www.geeksforgeeks.org/common-gateway-interface-cgi/">CGI</a>,
e tamb√©m por poder rendererizar as p√°ginas a todo a acesso do
usu√°rio(n√£o necess√°riamente a toda altera√ß√£o do projeto). O <a
href="https://git.zx2c4.com/cgit/">cgit</a> tamb√©m atende aos meus
requisitos de ser um software leve e simples e de quebra √© um software
que segue a filosofia <a href="https://suckless.org/">suckless</a>.</p>
<p>Com estas informa√ß√µes em m√£os eu decidi que o <a
href="https://git.zx2c4.com/cgit/">cgit</a> ser√° a minha interface
<code>git</code>.</p>
<h2 id="configurando-o-cgit">Configurando o <code>cgit</code></h2>
<p>Para come√ßar a configura√ß√£o do <a
href="https://git.zx2c4.com/cgit/">cgit</a> eu li o verbete do <a
href="https://git.zx2c4.com/cgit/">cgit</a> na <a
href="https://wiki.archlinux.org/title/Cgit">Arch Wiki</a>. Este verbete
descreve com clareza os passos para instalar o <a
href="https://git.zx2c4.com/cgit/">cgit</a> na sua
<strong>VPS</strong>.</p>
<p>Ap√≥s seguir as etapas de instala√ß√£o descritas na <a
href="https://wiki.archlinux.org/title/Cgit">Arch Wiki</a> eu apliquei
um <code>css</code> com <a
href="https://gist.github.com/Yoplitein/f4b671a2ec70c9e743fa">tema
<code>dark</code></a> que encontrei na internet.</p>
<p>O meu arquivo de <code>css</code> para o <a
href="https://git.zx2c4.com/cgit/">cgit</a> pode ser encontrado no meu
reposit√≥rio: <a href="https://git.calebe.dev.br/cgit/">cgit</a>.</p>
<h2 id="servidor-git">Servidor git</h2>
<p>Para eu poder ver meus reposit√≥rios renderizados pelo <a
href="https://git.zx2c4.com/cgit/">cgit</a> eu preciso ter o meu pr√≥prio
servidor <code>git</code>, n√£o √© mesmo?</p>
<p>Consegui configurar o meu pr√≥prio servidor <code>git</code> com
facilidade seguindo o guia de <a
href="https://git-scm.com/book/en/v2/Git-on-the-Server-Git-Daemon">refer√™ncia
do git</a>.</p>
<p>Foi algo bem simples n√£o tive problemas algum ao seguir os
passos.</p>
<p>Ap√≥s a configura√ß√£o do servidor git eu apenas informei ao <a
href="https://git.zx2c4.com/cgit/">cgit</a> em qual diret√≥rio os meus
reposit√≥rios estavam armazenados preenchendo o arquivo de configura√ß√£o
localizado em <code>/etc/cgitrepos</code>.</p>
<h2 id="configurando-mirrors">Configurando <code>mirrors</code></h2>
<p>Ap√≥s configurar o servidor git eu precisei espelhar no meu servidor,
os meus projetos hospedados tanto no <a
href="https://github.com/">Github</a> tanto no <a
href="https://gitlab.com/">Gitlab</a>.</p>
<p>Para isso utilizei um script que encontrei no <a
href="https://github.com/">Github</a>, chamado <a
href="https://github.com/janbaudisch/git-mirror">git-mirror</a>.</p>
<p>O <a href="https://github.com/janbaudisch/git-mirror">git-mirror</a>
√© uma ferramenta simples e escrito em <code>shell script</code>.</p>
<p>Para espelhar os meus projetos eu criei um diret√≥rio no meu
computador para armazenar os meus reposit√≥rios, em seguida eu utilizei o
seguinte comando para criar o espelho:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">git-mirror</span> setup path/to/directory https://someserver.domain/user/tomirror git@someserver.domain/user/mirror</span></code></pre></div>
<p>Este script tem que ser chamado com frequ√™ncia para atualizar os
remotos a cada altera√ß√£o, para isso o pr√≥prio desenvolvedor criou um
<code>target</code> do <code>systemd</code> para realizar a a√ß√£o de
<code>update</code> a cada 5 minutos.</p>
<p>Infelizmente os meus espelhos est√£o configurados apenas no meu
computador pessoal no momento, logo, se eu realizar alguma altera√ß√£o em
algum dos meus projetos, e o meu computador estiver desligado, esta
altera√ß√£o n√£o poder√° ser vista no meu servidor git em <a
href="https://git.calebe.dev.br">git.calebe.dev.br</a>.</p>
<p>E infelizmente tamb√©m os espelhos s√£o feitos em apenas uma dire√ß√£o,
ou seja, somente as altera√ß√µes enviadas para os remotos do <a
href="https://gitlab.com/">Gitlab</a> e <a
href="https://github.com/">Github</a> podem ser vistas no meu servidor
git.</p>
<p>Exemplo:</p>
<pre><code>    Gitlab              Meu Servidor
    HEAD      ----&gt;          Git
      |                       |
   Commit                   Commit
   cb35f94                  cb35f94</code></pre>
<p>Futuramente eu quero descobrir um jeito de criar espelhos
bidirecionais, ou seja, as altera√ß√µes poder√£o ser feitas em ambos os
remotos.</p>
<p>Exemplo:</p>
<pre><code>    Gitlab              Meu Servidor
    HEAD      &lt;&gt;----&gt;        Git
      |                       |
   Commit                   Commit
   cb35f94                  cb35f94</code></pre>
<h1 id="conclus√£o">Conclus√£o</h1>
<p>Configurar o <a href="https://git.zx2c4.com/cgit/">cgit</a> √© uma
tarefa relativamente f√°cil se voc√™ j√° tem um conhecimento de como
aplica√ß√µes [CGI] funcionam, de como configurar o <code>nginx</code>, de
como funciona o <code>ssh</code> e conhecimentos intermedi√°rios do uso
de comandos de linha de comando.</p>
<p>Lendo as documenta√ß√µes do <code>git</code> e do <a
href="https://git.zx2c4.com/cgit/">cgit</a> eu consegui hospedar um
servidor git simples e leve, e pode ser acessado em <a
href="https://git.calebe.dev.br">git.calebe.dev.br</a>.</p>
<hr>
<footer>
<p>
<center>
<h3>Contatos</h3>
<br />
<a style="text-decoration: none;" href="https://t.me/calebe94"><i class="icon-telegram"></i>Telegram</a>
<a style="text-decoration: none;" href="mailto:contato@calebe.dev.br"><i class="icon-mail"></i>Email</a>
<a style="text-decoration: none;" href="https://github.com/Calebe94"><i class="icon-github-circled"></i>Github</a>
<a style="text-decoration: none;" href="https://gitlab.com/Calebe94"><i class="icon-gitlab"></i>Gitlab</a>
<a style="text-decoration: none;" href="https://instagram.com/ocalebe94"><i class="icon-instagram"></i>Instagram</a>
</center>
</p>
</footer>
</main>
<script>
// Get the button
let mybutton = document.getElementById("top-button");

// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>
</body>
</html>

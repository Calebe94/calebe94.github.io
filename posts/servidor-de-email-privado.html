<!DOCTYPE html>
<html lang="en">
<head>
<link rel="stylesheet" href="/static/css/retro.css">
<link rel="stylesheet" href="/static/css/carousel.css">
<link rel="stylesheet" href="/static/css/fontello.css">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">

<!-- HTML Meta Tags -->
<title>Servidor de email
(self-hosted) &mdash; Servidor de email (self-hosted) - Calebe94</title>
<meta name="description" content="Esta √© a p√°gina pessoal e blog de Calebe94.">

<!-- Google / Search Engine Tags -->
<meta itemprop="name" content="calebe.dev.br">
<meta itemprop="description" content="Esta √© a p√°gina pessoal e blog de Calebe94.">
<meta itemprop="image" content="https://media.calebe.dev.br/images/calebe94_1200.png">

<!-- Facebook Meta Tags -->
<meta property="og:url" content="https://calebe.dev.br/site">
<meta property="og:type" content="website">
<meta property="og:title" content="calebe.dev.br">
<meta property="og:description" content="Esta √© a p√°gina pessoal e blog de Calebe94.">
<meta property="og:image" content="https://media.calebe.dev.br/images/calebe94.png">

<!-- Twitter Meta Tags -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="calebe.dev.br">
<meta name="twitter:description" content="Esta √© a p√°gina pessoal e blog de Calebe94.">
<meta name="twitter:image" content="https://media.calebe.dev.br/images/calebe94.png">

<!-- Meta Tags Generated via http://heymeta.com -->

<meta name="twitter:card" content="summary_large_image">

<!-- Meta Content Security Policy -->
<!-- <meta http-equiv="Content-Security-Policy"
     content="default-src 'self';
     script-src 'self' 'report-sample';
     style-src 'self' 'report-sample';
     base-uri 'self';
     object-src 'none';
     connect-src 'self';
     font-src 'self';
     frame-src 'self';
     form-action 'self';
     img-src 'self' data: https:;
     manifest-src 'self';
     media-src 'self';
     worker-src 'none';
     "> -->

<link rel="icon" type="image/x-icon" href="https://blog.calebe.dev.br/static/favicon.ico">
<style type="text/css" media="screen">
@import ‚Äú/static/css/fontello‚Äù;
</style>

<title>Servidor de email
(self-hosted) &mdash; Servidor de email (self-hosted) - Calebe94</title>
</head>
<body>
    <button onclick="topFunction()" id="top-button" title="Go to top">Top</button>
    <header class="site-header">

        <nav class="nav-top">
            <h3>
                <div>$
                    <span class="terminal__prompt--typing">
                        <div class="cover cover--whoami"></div>whoami
                    </span>
                </div>
                <div class="terminal__prompt--whoami-return">
                    <span>
                        <a href="/">Calebe94</a>
                    </span>
                </div>
            </h3>
            <h5><a href="/posts"a>‚úâÔ∏è Posts </a></h5>
            <h5><a href="/uses.html">‚öíÔ∏è Uses </a></h5>
            <h5><a href="/recommends/">üîñ   Favoritos </a></h5>
            <!-- <h5><a href="/curriculum.html">üìã    Curr√≠culo </a></h5> -->
            <h5><a href="//links.calebe.dev.br">üîó Links </a></h5>
            <h5><a href="//git.calebe.dev.br">üöß Projetos </a></h5>
        </nav>
    </header>
    <main>
    <hr>

    <h5><div class="terminal__prompt--pwd">$<span class="terminal__prompt--typing"><div class="cover cover--pwd"></div> pwd</span></div><div class="terminal__prompt--pwd-return"><span>/<a href="/">home</a>/<a href="/posts">posts</a>/<a href="/posts/servidor-de-email-privado.html">Servidor de email (self-hosted)</a></span></div></h5>
<h2>√çndice</h2>
<ul>
<li><a href="#servidor-de-email-self-hosted">Servidor de email
(self-hosted)</a>
<ul>
<li><a
href="#a-saga-da-frustra√ß√£o"><code>A saga da frustra√ß√£o</code></a></li>
<li><a href="#tentando-desbloquear-a-porta-25">Tentando desbloquear a
porta <code>25</code></a></li>
<li><a href="#smtp-relay">SMTP Relay</a></li>
<li><a href="#conclus√£o">Conclus√£o</a></li>
</ul></li>
</ul>
<!--
title: "Servidor de email (self-hosted)"
subtitle: ""
date: "2022-03-01 22:21:33"
tags: []

-->
<h1 id="servidor-de-email-self-hosted">Servidor de email
(self-hosted)</h1>
<h3 id="a-saga-da-frustra√ß√£o"><code>A saga da frustra√ß√£o</code></h3>
<p>Como citei em um <a href="./em-busca-de-uma-interface-git.html">post
anterior</a> eu possuo uma inst√¢ncia do <a
href="yunohost.org">Yunohost</a> em minha VPS. O <a
href="yunohost.org">Yunohost</a> facilita muito a tarefa de instalar as
suas aplica√ß√µes ‚Äúweb‚Äù em seu servidor e possui algumas ferramentas para
gerenciar o seu servidor. Uma delas √© o servidor de email, para te
notificar se algum erro ocorreu ao realizar o diagn√≥stico do servidor. √â
poss√≠vel tamb√©m realizar o redirecionamento de emails. Podendo o usu√°rio
cadastrar alguns emails na plataforma e quando receber algum email, o
<code>postfix</code> se encarrega de entregar este email em uma conta
pessoal do usu√°rio.</p>
<p>O meu plano era utilizar este recurso para cadastrar alguns emails
como:</p>
<ul>
<li><code>contato@calebe.dev.br</code>: e-mail de contato;</li>
<li><code>spam@calebe.dev.br</code>: e-mail para eu realizar cadastros
em lugares aleat√≥rios;</li>
</ul>
<p>Logo fiz os testes e percebi que n√£o funcionava. Em um dos
diagn√≥sticos eu percebi que a porta <code>25</code> era bloqueada pela
<a href="https://www.digitalocean.com/">Digital Ocean</a>.</p>
<figure>
<img
src="https://media.calebe.dev.br/images/blog/diagnostico_yunohost.png"
alt="Diagn√≥stico do Yunohost" />
<figcaption aria-hidden="true">Diagn√≥stico do Yunohost</figcaption>
</figure>
<p>O diagn√≥stico diz ser poss√≠vel receber e-mails, por√©m, n√£o √© poss√≠vel
receber e-mails.</p>
<p>Fiz um teste enviando um email para o meu <a
href="yunohost.org">Yunohost</a> com um email da Google, e deu tudo
certo. Recebi o e-mail com exito.</p>
<p>Bom, mas se a porta de sa√≠da est√° bloqueada, √© s√≥ desbloquear, certo?
Errado!</p>
<h2 id="tentando-desbloquear-a-porta-25">Tentando desbloquear a porta
<code>25</code></h2>
<p>Ap√≥s verificar o diagn√≥stico, corri atr√°s de desbloquear a porta
<code>25</code>.</p>
<p>Fui √† plataforma da <a href="https://www.digitalocean.com/">Digital
Ocean</a> procurar como desbloquear e n√£o encontrei.</p>
<p>Tentei desbloquear pelo <code>Firewall</code> do <a
href="yunohost.org">Yunohost</a> e aparentemente j√° estava desbloqueada.
Testei o envio de emails e nada.</p>
<p>Abri um protocolo no suporte da <a
href="https://www.digitalocean.com/">Digital Ocean</a> e a resposta
foi:</p>
<pre><code>Hi there,


Thank you for contacting DigitalOcean Support!

Stopping spam is a constant fight and due to this, your account has restrictions specifically on port 25.

However, you are able to use mail services using ports 587, 993, 995 and 465. You will need to open these ports in your firewall. Here is our guide to common iptables commands:</code></pre>
<p>Ou seja‚Ä¶ O servidor de emails do <a href="yunohost.org">Yunohost</a>
n√£o vai funcionar.</p>
<h2 id="smtp-relay">SMTP Relay</h2>
<p>Por√©m, o <a href="yunohost.org">Yunohost</a> sugere algumas
alternativas. Uma delas √© um <code>SMTP Relay</code>, onde eu preciso
assinar um servi√ßo externo(third-party) para poder utilizar o servidor
de emails.</p>
<p>Com algumas pesquisas na internet eu encontrei o <a
href="https://sendgrid.com">SendGrid</a>, um servi√ßo da <a
href="https://www.twillio.com">Twillio</a>. Eu conheci a <a
href="https://www.twillio.com">Twillio</a> a uns anos atr√°s quando
precisei de um servi√ßo de envio de SMS para um projeto que trabalhei.
Como gostei da plataforma resolvi tentar o <a
href="https://sendgrid.com">SendGrid</a>.</p>
<p>As instru√ß√µes da documenta√ß√£o s√£o bem claras e direto ao ponto. Foi
simples configurar tudo.</p>
<p>Ao terminar tudo, pude constatar estar tudo funcionando, pois, o
pr√≥prio <a href="https://sendgrid.com">SendGrid</a> j√° oferece o
diagn√≥stico na pr√≥pria plataforma.</p>
<p>Fiz alguns testes enviando emails por um email da Google e constatei
que eu continuava recebendo emails porem o redirecionamento continuava
sem funcionar. Ap√≥s horas de depura√ß√£o sem encontrar o problema e de <a
href="https://io.bikegremlin.com/11964/sendgrid-setup/">refazer todo o
processo de configura√ß√£o</a> eu resolvi deixar este problema para
l√°.</p>
<h2 id="conclus√£o">Conclus√£o</h2>
<p>Ao procurar em f√≥rums na internet, a maioria dos usu√°rios desencoraja
o uso de servidores de email privados por serem MUITO dif√≠ceis de
lidarem.</p>
<p>Muitos apontam ser muito mais barato assinar um servi√ßo que gerencie
o servidor e que possibilite a cria√ß√£o de v√°rios emails.</p>
<p>Logo, √© isso que eu estarei pesquisando nas pr√≥ximas semanas e
documentarei o processo em um novo post.</p>
<hr>
<footer>
<p>
<center>
<h3>Contatos</h3>
<br />
<a style="text-decoration: none;" href="https://t.me/calebe94"><i class="icon-telegram"></i>Telegram</a>
<a style="text-decoration: none;" href="mailto:contato@calebe.dev.br"><i class="icon-mail"></i>Email</a>
<a style="text-decoration: none;" href="https://github.com/Calebe94"><i class="icon-github-circled"></i>Github</a>
<a style="text-decoration: none;" href="https://gitlab.com/Calebe94"><i class="icon-gitlab"></i>Gitlab</a>
<a style="text-decoration: none;" href="https://instagram.com/ocalebe94"><i class="icon-instagram"></i>Instagram</a>
</center>
</p>
</footer>
</main>
<script>
// Get the button
let mybutton = document.getElementById("top-button");

// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>
</body>
</html>
